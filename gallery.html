<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💕 Anılarımız - Galeri</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="gallery.css">
    <link rel="stylesheet" href="theme-switcher.css">
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
</head>
<body>
    <div class="hearts-container"></div>

    <script src="auth.js"></script>
    <script>if (!checkAuth()) window.location.href = 'login.html';</script>

    <div class="gallery-wrapper">
        <!-- Floating Navigation -->
        <nav class="floating-nav">
            <button onclick="window.location.href='index.html'" class="nav-item">
                <span class="nav-icon">🏠</span>
                <span class="nav-text">Ana Sayfa</span>
            </button>
            <button onclick="window.location.href='bucket-list.html'" class="nav-item">
                <span class="nav-icon">🌈</span>
                <span class="nav-text">Hedefler</span>
            </button>
            <button onclick="window.location.href='admin.html'" class="nav-item">
                <span class="nav-icon">⚙️</span>
                <span class="nav-text">Yönetim</span>
            </button>
            <button onclick="logout()" class="nav-item">
                <span class="nav-icon">🚪</span>
                <span class="nav-text">Çıkış</span>
            </button>
        </nav>

        <!-- Hero Section -->
        <div class="gallery-hero">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="title-line">Bizim</span>
                    <span class="title-line highlight">Anılarımız</span>
                </h1>
                <p class="hero-subtitle">Her fotoğraf bir hikaye, her an değerli 💕</p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalPhotos">0</span>
                        <span class="stat-label">Fotoğraf</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalMemories">0</span>
                        <span class="stat-label">Anı</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <div class="filter-container">
                <div class="filter-section">
                    <span class="filter-label">📂</span>
                    <div class="filter-buttons" id="categoryFilters">
                        <button class="filter-chip active" data-filter="all">Tümü</button>
                        <button class="filter-chip" data-filter="tatil">🏖️ Tatil</button>
                        <button class="filter-chip" data-filter="selfie">🤳 Selfie</button>
                        <button class="filter-chip" data-filter="özel">🎉 Özel</button>
                        <button class="filter-chip" data-filter="doğa">🌲 Doğa</button>
                    </div>
                </div>
                <div class="filter-section">
                    <span class="filter-label">📅</span>
                    <div class="filter-buttons" id="dateFilters">
                        <button class="filter-chip date-chip active" data-date="all">Tümü</button>
                        <button class="filter-chip date-chip" data-date="this-month">Bu Ay</button>
                        <button class="filter-chip date-chip" data-date="last-month">Geçen Ay</button>
                        <button class="filter-chip date-chip" data-date="this-year">Bu Yıl</button>
                        <button class="filter-chip date-chip" data-date="older">Daha Eski</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Section -->
        <div class="upload-section">
            <div class="upload-container">
                <h3 class="upload-title">📤 Yeni Anı Ekle</h3>
                <div class="upload-area" onclick="document.getElementById('uploadInput').click()">
                    <div class="upload-icon">📸</div>
                    <p class="upload-text">Fotoğraf yüklemek için tıklayın</p>
                    <p class="upload-hint">veya sürükle bırak</p>
                    <input type="file" id="uploadInput" accept="image/*" multiple style="display: none;">
                </div>
            </div>
        </div>

        <!-- Upload Modal -->
        <div id="uploadModal" class="upload-modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeUploadModal()">✕</button>
                <h3>Fotoğraf Detayları</h3>
                <div class="modal-preview">
                    <img id="previewImage" src="" alt="Önizleme">
                </div>
                <div class="modal-form">
                    <div class="form-field">
                        <label>📝 Açıklama</label>
                        <input type="text" id="uploadCaption" placeholder="Bu anı hakkında bir şeyler yazın...">
                    </div>
                    <div class="form-field">
                        <label>📂 Kategori</label>
                        <select id="uploadCategory">
                            <option value="diğer">📷 Diğer</option>
                            <option value="tatil">🏖️ Tatil</option>
                            <option value="selfie">🤳 Selfie</option>
                            <option value="özel">🎉 Özel</option>
                            <option value="doğa">🌲 Doğa</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>📅 Tarih (boş bırakılırsa bugünün tarihi kullanılır)</label>
                        <input type="date" id="uploadDate" placeholder="Opsiyonel">
                    </div>
                    <div id="exifInfo" class="exif-info" style="display: none;">
                        <h4>📷 Fotoğraf Bilgileri</h4>
                        <div id="exifDetails"></div>
                    </div>
                    <button class="upload-btn" onclick="confirmUpload()">
                        <span>✨</span> Anıyı Kaydet
                    </button>
                </div>
            </div>
        </div>

        <!-- Photos Grid -->
        <div class="photos-container">
            <div id="photoGrid" class="masonry-grid">
                <!-- Photos will be loaded here -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-gallery" style="display: none;">
                <div class="empty-animation">
                    <div class="empty-circle"></div>
                    <div class="empty-icon">📸</div>
                </div>
                <h2 class="empty-title">Henüz Fotoğraf Yok</h2>
                <p class="empty-text">Güzel anılarınızı paylaşmaya başlayın!</p>
                <button onclick="window.location.href='admin.html'" class="empty-button">
                    <span>✨</span> İlk Anıyı Ekle
                </button>
            </div>
        </div>

        <!-- Lightbox -->
        <div id="lightbox" class="lightbox-overlay">
            <button class="lightbox-close" onclick="closeLightbox()">✕</button>
            <button class="lightbox-arrow left" onclick="navigateLightbox(-1)">‹</button>
            <button class="lightbox-arrow right" onclick="navigateLightbox(1)">›</button>
            
            <div class="lightbox-container">
                <div class="lightbox-image-wrapper">
                    <img id="lightboxImage" class="lightbox-image" src="" alt="">
                </div>
                <div class="lightbox-details">
                    <h3 id="lightboxCaption" class="lightbox-title">-</h3>
                    <p id="lightboxMeta" class="lightbox-info">-</p>
                </div>
            </div>
        </div>
    </div>

    <script src="theme-switcher.js"></script>
    <script type="module">
        import firebaseSync from './firebase-sync.js';
        window.firebaseSync = firebaseSync;
    </script>
    <script type="module" src="gallery.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>