<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#764ba2">
    <meta name="description" content="Bizim Ã¶zel aÅŸk hikayemiz - Sadece biz ikimizin alanÄ±">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’•</text></svg>">
    <title>Bizim Hikayemiz ğŸ’•</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="theme-switcher.css">
    <style>
        body {
            padding-bottom: 80px;
        }
    </style>
</head>
<body>
    <!-- Desktop Navigation -->
    <nav class="desktop-nav">
        <div class="desktop-nav-brand">ğŸ’• Bizim Hikayemiz</div>
        <div class="desktop-nav-menu">
            <a href="index.html" class="desktop-nav-item active">ğŸ  Ana Sayfa</a>
            <a href="gallery.html" class="desktop-nav-item">ğŸ“¸ Galeri</a>
            <a href="bucket-list.html" class="desktop-nav-item">ğŸŒˆ Hedefler</a>
            <a href="quiz.html" class="desktop-nav-item">ğŸ¯ Quiz</a>
            <a href="playlist.html" class="desktop-nav-item">ğŸµ MÃ¼zik</a>
            <a href="gifts.html" class="desktop-nav-item">ğŸ Hediyeler</a>
            <a href="reminders.html" class="desktop-nav-item">ğŸ“… HatÄ±rlatÄ±cÄ±lar</a>
            <a href="admin.html" class="desktop-nav-item">âš™ï¸ Ayarlar</a>
            <button onclick="logout()" class="desktop-nav-item">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="more-menu-overlay" id="moreMenuOverlay"></div>
    <div class="more-menu" id="moreMenu">
        <a href="quiz.html" class="more-menu-item">
            <span class="menu-icon">ğŸ¯</span>
            <span>Quiz</span>
        </a>
        <a href="playlist.html" class="more-menu-item">
            <span class="menu-icon">ğŸµ</span>
            <span>MÃ¼zik</span>
        </a>
        <a href="gifts.html" class="more-menu-item">
            <span class="menu-icon">ğŸ</span>
            <span>Hediyeler</span>
        </a>
        <a href="admin.html" class="more-menu-item">
            <span class="menu-icon">âš™ï¸</span>
            <span>Ayarlar</span>
        </a>
        <button onclick="logout()" class="more-menu-item">
            <span class="menu-icon">ğŸšª</span>
            <span>Ã‡Ä±kÄ±ÅŸ</span>
        </button>
    </div>

    <nav class="floating-nav">
        <a href="index.html" class="nav-item active">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-text">Ana Sayfa</span>
        </a>
        <a href="gallery.html" class="nav-item">
            <span class="nav-icon">ğŸ“¸</span>
            <span class="nav-text">Galeri</span>
        </a>
        <a href="bucket-list.html" class="nav-item">
            <span class="nav-icon">ğŸŒˆ</span>
            <span class="nav-text">Hedefler</span>
        </a>
        <a href="reminders.html" class="nav-item">
            <span class="nav-icon">ğŸ“…</span>
            <span class="nav-text">HatÄ±rlatÄ±cÄ±lar</span>
        </a>
        <button class="nav-item" id="moreBtn">
            <span class="nav-icon">â‹¯</span>
            <span class="nav-text">DiÄŸer</span>
        </button>
    </nav>

    <script>
        // More menu toggle
        document.addEventListener('DOMContentLoaded', () => {
            const moreBtn = document.getElementById('moreBtn');
            const moreMenu = document.getElementById('moreMenu');
            const moreMenuOverlay = document.getElementById('moreMenuOverlay');
            
            if (moreBtn && moreMenu && moreMenuOverlay) {
                moreBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    moreMenu.classList.toggle('active');
                    moreMenuOverlay.classList.toggle('active');
                });
                
                moreMenuOverlay.addEventListener('click', () => {
                    moreMenu.classList.remove('active');
                    moreMenuOverlay.classList.remove('active');
                });
            }
        });
    </script>

    <!-- GiriÅŸ KontrolÃ¼ -->
    <script src="auth.js"></script>
    <!-- Firebase -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="firebase-sync.js"></script>
    <script type="module" src="fcm-manager.js"></script>
    <!-- PWA & Bildirimler -->
    <script src="pwa-installer.js"></script>
    <script src="notification-system.js"></script>
    <script src="video-manager.js"></script>
    <script>
        // Sayfa yÃ¼klendiÄŸinde giriÅŸ kontrolÃ¼
        if (!checkAuth()) {
            window.location.href = 'login.html';
        }
    </script>
    <!-- Kalp animasyonlarÄ± iÃ§in container -->
    <div class="hearts-container"></div>
    
    <!-- Ana iÃ§erik -->
    <div class="container">
        <!-- BaÅŸlÄ±k -->
        <header>
            <!-- Profile Photos Section -->
            <div class="profile-section">
                <div class="profile-container">
                    <div class="profile-photo" id="profile1">
                        <img id="profileImg1" src="" alt="Profil 1" style="display: none;">
                        <div class="profile-placeholder" id="placeholder1">
                            <span class="profile-icon">ğŸ‘¤</span>
                            <span class="upload-text">FotoÄŸraf Ekle</span>
                        </div>
                        <input type="file" id="profileUpload1" accept="image/*" style="display: none;">
                        <button class="profile-upload-btn" onclick="document.getElementById('profileUpload1').click()">ğŸ“·</button>
                    </div>
                    
                    <div class="heart-connector">
                        <span class="big-heart">ğŸ’•</span>
                    </div>
                    
                    <div class="profile-photo" id="profile2">
                        <img id="profileImg2" src="" alt="Profil 2" style="display: none;">
                        <div class="profile-placeholder" id="placeholder2">
                            <span class="profile-icon">ğŸ‘¤</span>
                            <span class="upload-text">FotoÄŸraf Ekle</span>
                        </div>
                        <input type="file" id="profileUpload2" accept="image/*" style="display: none;">
                        <button class="profile-upload-btn" onclick="document.getElementById('profileUpload2').click()">ğŸ“·</button>
                    </div>
                </div>
            </div>
            
            <h1 class="main-title">Bizim Hikayemiz ğŸ’•</h1>
            
            <!-- Typewriter Effect -->
            <div class="typewriter-container">
                <p class="typewriter-text" id="typewriterText"></p>
                <span class="cursor">|</span>
            </div>
            
            <p class="subtitle">Her anÄ±mÄ±z Ã¶zel, her gÃ¼nÃ¼mÃ¼z deÄŸerli...</p>
            <p class="subtitle" id="welcomeUser" style="margin-top: 10px; font-size: 1em;"></p>
        </header>

        <!-- Zaman SayacÄ± -->
        <section class="counter-section">
            <h2>Birlikte GeÃ§irdiÄŸimiz Zaman â°</h2>
            <div class="time-counter">
                <div class="time-box">
                    <span class="time-value" id="days">0</span>
                    <span class="time-label">GÃ¼n</span>
                </div>
                <div class="time-box">
                    <span class="time-value" id="hours">0</span>
                    <span class="time-label">Saat</span>
                </div>
                <div class="time-box">
                    <span class="time-value" id="minutes">0</span>
                    <span class="time-label">Dakika</span>
                </div>
                <div class="time-box">
                    <span class="time-value" id="seconds">0</span>
                    <span class="time-label">Saniye</span>
                </div>
            </div>
        </section>

        <!-- Ã–zel GÃ¼nler -->
        <section class="special-dates">
            <h2>Ã–zel GÃ¼nlerimiz ğŸ‰</h2>
            <div class="dates-grid">
                <div class="date-card">
                    <div class="date-icon">ğŸ’‘</div>
                    <h3>Ä°lk TanÄ±ÅŸma</h3>
                    <p class="date-text" id="firstMeet">-</p>
                    <p class="days-ago" id="firstMeetDays">-</p>
                </div>
                <div class="date-card">
                    <div class="date-icon">â¤ï¸</div>
                    <h3>Ä°liÅŸkimizin BaÅŸlangÄ±cÄ±</h3>
                    <p class="date-text" id="relationship">-</p>
                    <p class="days-ago" id="relationshipDays">-</p>
                </div>
                <div class="date-card">
                    <div class="date-icon">ğŸ’</div>
                    <h3>Ä°lk Ã–pÃ¼cÃ¼k</h3>
                    <p class="date-text" id="firstKiss">-</p>
                    <p class="days-ago" id="firstKissDays">-</p>
                </div>
                <div class="date-card">
                    <div class="date-icon">ğŸŒŸ</div>
                    <h3>En Ã–zel AnÄ±mÄ±z</h3>
                    <p class="date-text" id="specialDay">-</p>
                    <p class="days-ago" id="specialDayDays">-</p>
                </div>
            </div>
        </section>

        <!-- FotoÄŸraf Galerisi -->
        <section class="gallery-section">
            <h2>AnÄ±larÄ±mÄ±z ğŸ“¸</h2>
            <div class="gallery-container">
                <button class="gallery-btn prev-btn" onclick="previousImage()">â®</button>
                <div class="gallery-display">
                    <img id="galleryImage" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400'%3E%3Crect width='600' height='400' fill='%23ff69b4'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='24' fill='white'%3EAdmin Panelden FotoÄŸraf Ekleyin ğŸ“¸%3C/text%3E%3C/svg%3E" alt="Bizim fotoÄŸrafÄ±mÄ±z">
                    <p class="photo-caption" id="photoCaption">Admin panelden fotoÄŸraf ekleyin ğŸ’•</p>
                </div>
                <button class="gallery-btn next-btn" onclick="nextImage()">â¯</button>
            </div>
            <div class="gallery-dots" id="galleryDots"></div>
        </section>

        <!-- AÅŸk MesajlarÄ± -->
        <section class="messages-section">
            <h2>Sana SÃ¶ylemek Ä°stediklerim ğŸ’Œ</h2>
            <div class="message-display">
                <p class="love-message" id="loveMessage">YÃ¼kleniyor...</p>
                <button class="new-message-btn" onclick="showRandomMessage()">Yeni Mesaj ğŸ’</button>
            </div>
        </section>

        <!-- Birlikte YapacaklarÄ±mÄ±z -->
        <section class="bucket-list">
            <h2>Birlikte YapacaklarÄ±mÄ±z ğŸŒˆ</h2>
            <div class="bucket-grid" id="bucketListPreview"></div>
            <div style="text-align: center; margin-top: 30px;">
                <button onclick="window.location.href='bucket-list.html'" class="new-message-btn">
                    ğŸ¯ TÃ¼m Hedefleri GÃ¶r
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p class="footer-text">Seninle her an Ã¶zel â¤ï¸</p>
            <p class="footer-date" id="currentDate"></p>
        </footer>
    </div>

    <script src="theme-switcher.js"></script>
    <script type="module">
        // Firebase Sync'i import et
        import firebaseSync from './firebase-sync.js';
        
        // Global olarak eriÅŸilebilir yap
        window.firebaseSync = firebaseSync;
        
        // localStorage'dan Firebase'e veri taÅŸÄ± (ilk seferlik)
        const migrated = localStorage.getItem('firebase_migrated');
        if (!migrated) {
            console.log('ğŸ”„ Firebase migration baÅŸlatÄ±lÄ±yor...');
            firebaseSync.migrateFromLocalStorage().then(() => {
                localStorage.setItem('firebase_migrated', 'true');
                console.log('âœ… Migration tamamlandÄ±!');
            });
        }
    </script>
    <script type="module" src="script.js"></script>
    
    <!-- Bottom Navigation is provided above (unified floating-nav). Removed duplicate here to avoid conflicts -->
</body>
</html>
